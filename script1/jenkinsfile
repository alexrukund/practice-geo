pipeline{
    agent any
    tools{
        maven 'M2_HOME'
    }
    stages{
        stage("maven"){
            steps{
              sh 'mvn clean validate compile install test package'  
            }
            
        }
         stage("upload artifact"){
            steps{
              sh 'curl -uadmin:AP5CNW3E6mvDGwoPRSb2crkLwR2 -T target/bio*.jar "http://ec2-34-202-233-128.compute-1.amazonaws.com:8081/artifactory/geo-app/_${BUILD_ID}.jar"'
       
    }
}
stage ('docker login'){
    steps{
        sh 'aws ecr get-login-password --region us-east-1 | \
        docker login --username AWS --password-stdin \
        891377154217.dkr.ecr.us-east-1.amazonaws.com'
    }
}

    
}
    }
